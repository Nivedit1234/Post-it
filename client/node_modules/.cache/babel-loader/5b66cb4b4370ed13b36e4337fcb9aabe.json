{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nived\\\\OneDrive\\\\Desktop\\\\Project-Minor\\\\Post-it\\\\client\\\\src\\\\components\\\\UserPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchUser, loadUserPosts } from '../reducers/userPageReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport { getCircularAvatar } from '../utils/cloudinaryTransform';\nimport UserPostCard from './UserPostCard';\nimport ErrorPage from './ErrorPage';\nimport LoadMoreButton from './LoadMoreButton';\nimport LoadingSpinner from './LoadingSpinner';\nimport getErrorMsg from '../utils/getErrorMsg';\nimport { Container, Paper, useMediaQuery, Typography, Avatar } from '@material-ui/core';\nimport { useUserPageStyles } from '../styles/muiStyles';\nimport { useTheme } from '@material-ui/core/styles';\nimport CakeIcon from '@material-ui/icons/Cake';\nimport PersonIcon from '@material-ui/icons/Person';\n\nconst UserPage = () => {\n  _s();\n\n  const classes = useUserPageStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n  const {\n    username\n  } = useParams();\n  const dispatch = useDispatch();\n  const userInfo = useSelector(state => state.userPage);\n  const user = useSelector(state => state.user);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageLoading, setPageLoading] = useState(true);\n  const [pageError, setPageError] = useState(null);\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        await dispatch(fetchUser(username));\n        setPageLoading(false);\n      } catch (err) {\n        setPageError(getErrorMsg(err), 'error');\n      }\n    };\n\n    getUser(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [username]);\n\n  if (pageError) {\n    return /*#__PURE__*/React.createElement(Container, {\n      disableGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      variant: \"outlined\",\n      className: classes.mainPaper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ErrorPage, {\n      errorMsg: pageError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  if (!userInfo || pageLoading) {\n    return /*#__PURE__*/React.createElement(Container, {\n      disableGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      variant: \"outlined\",\n      className: classes.mainPaper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(LoadingSpinner, {\n      text: \"Fetching user data...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  const {\n    avatar,\n    username: userName,\n    createdAt,\n    posts,\n    totalComments,\n    karmaPoints\n  } = userInfo.userDetails;\n\n  const handleLoadPosts = async () => {\n    try {\n      setLoadingMore(true);\n      await dispatch(loadUserPosts(username, page + 1));\n      setPage(prevState => prevState + 1);\n      setLoadingMore(false);\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    disableGutters: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    variant: \"outlined\",\n    className: classes.mainPaper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.userInfoWrapper,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatarWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, avatar && avatar.exists ? /*#__PURE__*/React.createElement(Avatar, {\n    alt: userName,\n    src: getCircularAvatar(avatar.imageLink),\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(Avatar, {\n    style: {\n      backgroundColor: '#941a1c'\n    },\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, userName[0])), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, \"u/\", userName)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.rightWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.twoItemsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Cake Day\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"secondary\",\n    className: classes.cakeDay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CakeIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }), String(new Date(createdAt)).split(' ').slice(1, 4).join(' '))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.twoItemsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, posts.length), \" Posts\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, totalComments), \" Comments\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.twoItemsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Karma\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, karmaPoints.commentKarma + karmaPoints.postKarma)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.twoItemsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, \"Post Karma \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 30\n    }\n  }, karmaPoints.postKarma)), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, \"Comment Karma \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }, karmaPoints.commentKarma)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.postsPaper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, userInfo.posts.results.length !== 0 ? userInfo.posts.results.map(p => /*#__PURE__*/React.createElement(UserPostCard, {\n    key: p.id,\n    post: p,\n    user: user,\n    isMobile: isMobile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.noPosts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PersonIcon, {\n    color: \"primary\",\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"u/\", userName), \" has not made any posts yet\"))), 'next' in userInfo.posts && /*#__PURE__*/React.createElement(LoadMoreButton, {\n    handleLoadPosts: handleLoadPosts,\n    loading: loadingMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  })));\n};\n\n_s(UserPage, \"J4BGvGUkpBU05UT2XS1fU2MRjHg=\", false, function () {\n  return [useUserPageStyles, useTheme, useMediaQuery, useParams, useDispatch, useSelector, useSelector];\n});\n\n_c = UserPage;\nexport default UserPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"sources":["C:/Users/nived/OneDrive/Desktop/Project-Minor/Post-it/client/src/components/UserPage.js"],"names":["React","useEffect","useState","useParams","useDispatch","useSelector","fetchUser","loadUserPosts","notify","getCircularAvatar","UserPostCard","ErrorPage","LoadMoreButton","LoadingSpinner","getErrorMsg","Container","Paper","useMediaQuery","Typography","Avatar","useUserPageStyles","useTheme","CakeIcon","PersonIcon","UserPage","classes","theme","isMobile","breakpoints","down","username","dispatch","userInfo","state","userPage","user","page","setPage","loadingMore","setLoadingMore","pageLoading","setPageLoading","pageError","setPageError","getUser","err","mainPaper","avatar","userName","createdAt","posts","totalComments","karmaPoints","userDetails","handleLoadPosts","prevState","userInfoWrapper","avatarWrapper","exists","imageLink","backgroundColor","rightWrapper","itemWrapper","twoItemsDiv","cakeDay","String","Date","split","slice","join","length","commentKarma","postKarma","postsPaper","results","map","p","id","noPosts"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchUser, loadUserPosts } from '../reducers/userPageReducer';\r\nimport { notify } from '../reducers/notificationReducer';\r\nimport { getCircularAvatar } from '../utils/cloudinaryTransform';\r\nimport UserPostCard from './UserPostCard';\r\nimport ErrorPage from './ErrorPage';\r\nimport LoadMoreButton from './LoadMoreButton';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport getErrorMsg from '../utils/getErrorMsg';\r\n\r\nimport {\r\n  Container,\r\n  Paper,\r\n  useMediaQuery,\r\n  Typography,\r\n  Avatar,\r\n} from '@material-ui/core';\r\nimport { useUserPageStyles } from '../styles/muiStyles';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\nconst UserPage = () => {\r\n  const classes = useUserPageStyles();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\r\n  const { username } = useParams();\r\n  const dispatch = useDispatch();\r\n  const userInfo = useSelector((state) => state.userPage);\r\n  const user = useSelector((state) => state.user);\r\n  const [page, setPage] = useState(1);\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [pageError, setPageError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        await dispatch(fetchUser(username));\r\n        setPageLoading(false);\r\n      } catch (err) {\r\n        setPageError(getErrorMsg(err), 'error');\r\n      }\r\n    };\r\n    getUser();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [username]);\r\n\r\n  if (pageError) {\r\n    return (\r\n      <Container disableGutters>\r\n        <Paper variant=\"outlined\" className={classes.mainPaper}>\r\n          <ErrorPage errorMsg={pageError} />\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!userInfo || pageLoading) {\r\n    return (\r\n      <Container disableGutters>\r\n        <Paper variant=\"outlined\" className={classes.mainPaper}>\r\n          <LoadingSpinner text=\"Fetching user data...\" />\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  const {\r\n    avatar,\r\n    username: userName,\r\n    createdAt,\r\n    posts,\r\n    totalComments,\r\n    karmaPoints,\r\n  } = userInfo.userDetails;\r\n\r\n  const handleLoadPosts = async () => {\r\n    try {\r\n      setLoadingMore(true);\r\n      await dispatch(loadUserPosts(username, page + 1));\r\n      setPage((prevState) => prevState + 1);\r\n      setLoadingMore(false);\r\n    } catch (err) {\r\n      dispatch(notify(getErrorMsg(err), 'error'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container disableGutters>\r\n      <Paper variant=\"outlined\" className={classes.mainPaper}>\r\n        <Paper className={classes.userInfoWrapper} variant=\"outlined\">\r\n          <div className={classes.avatarWrapper}>\r\n            {avatar && avatar.exists ? (\r\n              <Avatar\r\n                alt={userName}\r\n                src={getCircularAvatar(avatar.imageLink)}\r\n                className={classes.avatar}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                style={{ backgroundColor: '#941a1c' }}\r\n                className={classes.avatar}\r\n              >\r\n                <h1>{userName[0]}</h1>\r\n              </Avatar>\r\n            )}\r\n            <Typography variant=\"h6\" color=\"secondary\">\r\n              u/{userName}\r\n            </Typography>\r\n          </div>\r\n          <div className={classes.rightWrapper}>\r\n            <div className={classes.itemWrapper}>\r\n              <div className={classes.twoItemsDiv}>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  Cake Day\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  color=\"secondary\"\r\n                  className={classes.cakeDay}\r\n                >\r\n                  <CakeIcon />\r\n                  {String(new Date(createdAt)).split(' ').slice(1, 4).join(' ')}\r\n                </Typography>\r\n              </div>\r\n              <div className={classes.twoItemsDiv}>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  <strong>{posts.length}</strong> Posts\r\n                </Typography>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  <strong>{totalComments}</strong> Comments\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n            <div className={classes.itemWrapper}>\r\n              <div className={classes.twoItemsDiv}>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  Karma\r\n                </Typography>\r\n                <Typography variant=\"h6\" color=\"secondary\">\r\n                  {karmaPoints.commentKarma + karmaPoints.postKarma}\r\n                </Typography>\r\n              </div>\r\n              <div className={classes.twoItemsDiv}>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  Post Karma <strong>{karmaPoints.postKarma}</strong>\r\n                </Typography>\r\n                <Typography variant=\"body1\" color=\"secondary\">\r\n                  Comment Karma <strong>{karmaPoints.commentKarma}</strong>\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Paper>\r\n        <div className={classes.postsPaper}>\r\n          {userInfo.posts.results.length !== 0 ? (\r\n            userInfo.posts.results.map((p) => (\r\n              <UserPostCard\r\n                key={p.id}\r\n                post={p}\r\n                user={user}\r\n                isMobile={isMobile}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className={classes.noPosts}>\r\n              <PersonIcon color=\"primary\" fontSize=\"large\" />\r\n              <Typography variant=\"h5\" color=\"secondary\">\r\n                <strong>u/{userName}</strong> has not made any posts yet\r\n              </Typography>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {'next' in userInfo.posts && (\r\n          <LoadMoreButton\r\n            handleLoadPosts={handleLoadPosts}\r\n            loading={loadingMore}\r\n          />\r\n        )}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n"]},"metadata":{},"sourceType":"module"}